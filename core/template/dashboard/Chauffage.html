<div class="eqLogic eqLogic-widget allowResize allowReorderCmd #custom_layout# #class#" data-eqType="#eqType#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#" data-translate-category="#translate_category#" data-category="#category#"
    data-tags="#tags#" style="min-height:170px!important;max-height:170px!important;max-width:145px!important;min-width:145px!important; width: 145px!important;">

    <center class="object_name" style="overflow: hidden;padding-right:22px;padding-left:12px;font-weight:300;word-break: break-all;max-height:45px;font-size:16px;background-color: rgba(0,0,0,0.6);font-family:Arial;font-weight:normal;">
        <a href="#eqLink#" class="reportModeHidden">#object_name#</a>
    </center>
    <center class="widget-name" style="margin-bottom: 0px;max-height:22px;">
        <a href="#eqLink#" class="reportModeHidden">#name_display#</a>
    </center>

    

    <div class="tuile" style="height:100%">
        <div class="page_1 center " style="height:100%;padding-top: 10px;margin: 0px;display : none;">
          
                <img class="img cmd cmd-widget " data-type="info" src='' style='height:75px;width:75px' />
                <span class="nom_eqLogic" style="display:none;position: absolute;top: 60px;width: 100%;color: red;font-weight: 700;font-size: 16px;">#name_display#</span>
           
           
            <span>
                <img class="img_auto_manu cmd cmd-widget " data-type="info" src='' style="position: absolute;top: 25px;left:calc(50% + 10px);height:20px" />       
            </span>
            
            <div class="center" style="width: 90%;margin: auto;padding-top:10px;">
                <img class="confort cmd cmd-widget  cursor" data-type="action" src="plugins/planification/core/template/dashboard/images/Chauffage/bouton_confort.png" style="width:30px;">
                <img class="eco cmd cmd-widget  cursor" data-type="action" src="plugins/planification/core/template/dashboard/images/Chauffage/bouton_eco.png" style="width:30px;position: relative;left: 0px;">
                <img class="hors_gel cmd cmd-widget  cursor" data-type="action" src="plugins/planification/core/template/dashboard/images/Chauffage/bouton_hors_gel.png" style="width:30px;">
                <img class="arret cmd cmd-widget  cursor" data-type="action" src="plugins/planification/core/template/dashboard/images/Chauffage/bouton_arret.png" style="width:30px;">
            </div>

            <div class="center prochaine_action tooltips" style="font-size: 0.9em;margin: 5px;color:white!important">
                <span style="cursor:default;"></span>
            </div>
        </div>

        <div class="page_2 center" style="display : none ;height:100%;margin-top : 0px">

            <div style="height:25%;">
                <select class="selectPlanification cmd  cursor tooltips" style="top: calc(100% - 26px);position: relative;width:70%;color:white!important;border-radius: 10px!important" title="Choisir une planification">
					#calendar_selector#
				</select>
            </div>
            <div style="height:25%">
                <div style="display: block;">
                    <a class='input-group-addon cursor tooltips  bt_afficher_timepicker' style=" top: 2px;margin: auto;padding: 5px 12px!important;display:block;width:70%;color:white!important;border-radius: 10px!important;position:relative;" title="Choisir Fin">
                        <span class="center fa fa-calendar" style="color:white"> 
                            <input class="in_timepicker input-sm" style="position:absolute;left:30%;top:50%;height: 0px!important;width: 0px!important; padding: 0px!important;">
                        </span>
                    </a>
                </div>

            </div>
            <div style="height:50%">
                <div class="info_widget" style="width:100%;overflow:auto;height:100%;margin: auto;font-size: 0.9em;color:white!important">
                </div>
            </div>

        </div>
        <span class="refresh cmd  pull-right cursor" style="position: absolute;right: 0px;top:0px" data-cmd_id="#refresh_id#">
            <i class="fas fa-sync"></i>
        </span>
        <i class="changecmd fa fa-retweet cursor tooltips  noRefresh" title="Afficher la deuxième page" style="position : absolute;bottom: 3px;right: 3px;z-index: 500;"></i>
            


    </div>
   
    <script>
    function loadScript(url, callback) {
    // Vérifier si le script est déjà chargé
        if (document.querySelector(`script[src="${url}"]`)) {
            waitForFunctions(callback);
            return;
        }

        let script = document.createElement('script');
        script.src = url;

        script.onload = function() {
            waitForFunctions(callback);
        };   
        document.head.appendChild(script);
    }

    function waitForFunctions(callback) {
        if (typeof Affichage_widget === 'function' && typeof Commun_widget === 'function' && typeof SetWidget_Thermostat == 'function' && typeof Maj_Thermostat == 'function' && typeof Reset_page == 'function') {
            callback();
        } else {
            setTimeout(() => waitForFunctions(callback), 50);
        }
    }
    loadScript('plugins/planification/core/template/dashboard/js/widget.js', function() { 
        
        var cmds_id = {
            premier_affichage: '#premier_affichage#',
            nom_eqlogic:'#nom_eqlogic#',
            auto_id: '#auto_id#',          	
            eqLogic_id: '#id#',
            page: '#page#',
            mode: '#mode#', mode_id: '#mode_id#',
            etat: '#etat#', etat_id: '#etat_id#',
            action_en_cours:'#action_en_cours#',action_en_cours_id:'#action_en_cours_id#',
            action_suivante:'#action_suivante#',action_suivante_id:'#action_suivante_id#',
            calendar_selector: '#calendar_selector#',
            heure_fin: '#heure_fin#',heure_fin_id: '#heure_fin_id#',
            planification_en_cours : '#planification_en_cours#', planification_en_cours_id: '#planification_en_cours_id#',
            mode_planification : '#mode_planification#',
            info_widget:'#info_widget#',info_widget_id:'#info_widget_id#',
            set_heure_fin_id: '#set_heure_fin_id#',
			set_planification_id: '#set_planification_id#',
	                    
            confort_id: '#confort_id#',
            eco_id : '#eco_id#',
            hors_gel_id : '#hg_id#',
            arret_id : '#arret_id#'
        };
        Affichage_widget('Chauffage',cmds_id)
    })
       

    </script>

</div>