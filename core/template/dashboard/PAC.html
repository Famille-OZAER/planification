<div class="eqLogic eqLogic-widget allowResize allowReorderCmd #custom_layout# #class#" data-eqType="#eqType#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#" data-translate-category="#translate_category#" data-category="#category#"
    data-tags="#tags#" style="min-width:220px!important;min-height:170px!important;width: #width#;height: #height#;#style#">

    <center class="object_name" style="overflow: hidden;padding-right:22px;padding-left:12px;font-weight:300;word-break: break-all;max-height:45px;font-size:16px;background-color: rgba(0,0,0,0.6);font-family:Arial;font-weight:normal;">
        <span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#">
				<i class="fas fa-sync"></i>
			</span>
        <a href="#eqLink#" class="reportModeHidden">#object_name#</a>

    </center>
    <center class="widget-name" style="margin-bottom: 0px;max-height:22px;">
        <span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#">
				<i class="fas fa-sync"></i>
			</span>
        <a href="#eqLink#" class="reportModeHidden">#name_display#</a>
    </center>
    <i class="fa fa-retweet cursor tooltips changecmd noRefresh" title="Changer commandes" style="position : absolute;bottom: 3px;right: 3px;z-index: 500;"></i>
    <div class="tuile">
        <div class="page_1" style="margin: 0px;height:100%;margin: 0px;display : #display_page_1#;">
            <div class="col-xs-6 gauche" style="height:60%;margin:0px;padding: 0px!important;">

                <i class="fa fa-fire boost cursor tooltips" title="Activer le mode boost" style="position:relative;float:right;top: calc(100% - 40px);display:none;font-size: 1.9em;margin-left: 5px;color:white!important"></i>
                <!--<i class="fa fa-fire boost_off cursor tooltips" title="Désactiver le mode boost" style="position:relative;float:right;top:40px;display:none;font-size: 1.9em;margin-left: 5px;color:red!important"></i>-->
                <img src="plugins/planification/core/template/dashboard/images/pac/#img#" style="position:relative;top:calc(100% - 80px);float: right;height: 80px;" />
            </div>
            <div class="col-xs-6 droite" style="height:60%;margin:0px;padding: 0px!important;">
                <div class="Thermostat" style="top: calc(100% - 90px);"></div>
            </div>
            <div class="col-xs-12 center" style="height:40%;margin:0px;padding: 0px!important;">
                <span class="action_en_cours tooltips" style="cursor:default;font-size:10px;margin-left: 5px;margin-top: 5px;color:white!important" title="Action en cours"></span>
                <span class="fleche" style="cursor:default;font-size: 10px;margin-left: 5px;margin-top: 5px;color:white!important"></span>
                <span class="prochaine_action tooltips" style="cursor:default;font-size: 10px;margin-left: 5px;margin-top: 5px;color:white!important" title="Prochaine action"></span>
                <span class="heure_prochaine_action tooltips" style="cursor:default;font-size: 10px;margin-left: 5px;margin-top: 5px;color:white!important" title="Heure prochaine action"></span>
                <div>
                    <span class="planification_en_cours tooltips" style="cursor:default;font-size: 10px;margin-left: 5px;margin-top: 5px;color:white!important" title="planification en cours"></span>
                </div>
            </div>
        </div>

        <div class="page_2" style="display : #display_page_2# ;padding-top: 10px;height:70%;margin: 0px">
            <div class="col-xs-6 gauche" style="height:100%;padding: 0px!important;">
                <div style="height: 50%;">
                    <i class="pull-right icon nature-snowflake Climatisation cursor tooltips" title="Mettre le planning en mode climatisation forcée" style="position: relative;top: calc(100% - 27px);font-size: 30px;margin-left: 2px;color:#3498db!important"></i>
                    <i class="pull-right icon jeedom-mouvement Absent cursor tooltips" title="Mettre le planning en mode absent" style="position: relative;top: calc(100% - 27px);font-size: 30px;margin-left: 2px;color:#3498db!important"></i>
                    <i class="pull-right fa fa-cog Auto cursor tooltips" title="Mettre le planning en mode automatique" style="position: relative;top: calc(100% - 27px);font-size: 30px;margin-left: 2px;color:#3498db!important"></i>

                </div>
                <div style="height: 50%;">
                    <i class="pull-right fa fa-times Arret cursor tooltips" title="Arrêter le planning" style="position: relative;top: 2px;font-size: 30px;margin-right: 7px;color:#3498db!important"></i>
                    <i class="pull-right icon jeedom-ventilo Ventilation cursor tooltips" title="Mettre le planning en mode ventilation forcée" style="position: relative;top: 6px;font-size: 40px;margin-right: 7px;color:#3498db!important"></i>
                    <i class="pull-right icon nature-weather1 Chauffage cursor tooltips" title="Mettre le planning en mode chauffe forcée" style="position: relative;top: 2px;font-size:30px;margin-right: 7px;color:#3498db!important"></i>
                </div>

            </div>
            <div class="col-xs-6 droite" style="height:100%;padding: 0px!important;">
                <div style="height:50%;">
                    <select class="cmd selectCalendar cursor tooltips" style="top: calc(100% - 27px);position: relative;width:80%;color:white!important;border-radius: 10px!important" title="Choisir une planification">
								#calendar_selector#
						</select>
                </div>
                <div style="height:50%;">
                    <div class='input-group-addon cursor tooltips date datetimepicker' style="top: 2px;position: relative;padding: 6px 12px!important;display:block;width:80%;color:white!important;border-radius: 10px!important;position:relative;" title="Selectionner heure de fin">
                        <span class="center fa fa-calendar" style="color:white"></span>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 page_2 center" style="height:30%;margin: 0px;">
                <div class="info_widget" style="width:100%;overflow:auto;height:100%;margin: auto;font-size: 0.7em;color:white!important">
                </div>
            </div>
        </div>


    </div>

    <link rel="stylesheet" type="text/css" href="plugins/planification/core/template/dashboard/css/widget.css" media="all" />
    <script src="plugins/planification/core/template/dashboard/js/widget.js"></script>



    <script>
        SetWidget_Thermostat($('.eqLogic[data-eqLogic_uid=#uid#]'), '#set_consigne_temperature_id#', '#consigne_min#', '#consigne_max#', '#consigne#', '#temperature#')



        $('.eqLogic[data-eqLogic_uid=#uid#] .refresh').on('click', function() {
            jeedom.cmd.execute({
                id: '#refresh_id#'
            });
        });

        $('.eqLogic[data-eqLogic_uid=#uid#] .Absent').on('click', function() {
            if ('#boost#' == 1) {
                jeedom.cmd.execute({
                    id: '#boost_off_id#'
                })
            }
            jeedom.cmd.execute({
                id: '#absent_id#'
            })
        })

        $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').on('click', function() {
            jeedom.cmd.execute({
                id: '#climatisation_id#'
            })
        })

        $('.eqLogic[data-eqLogic_uid=#uid#] .Auto').on('click', function() {
            if ('#boost#' == 1) {
                jeedom.cmd.execute({
                    id: '#boost_off_id#'
                })
            }
            jeedom.cmd.execute({
                id: '#auto_id#'
            })
        })

        $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').on('click', function() {
            jeedom.cmd.execute({
                id: '#chauffage_id#'
            })
        })

        $('.eqLogic[data-eqLogic_uid=#uid#] .Arret').on('click', function() {
            if ('#boost#' == 1) {
                jeedom.cmd.execute({
                    id: '#boost_off_id#'
                })
            }
            jeedom.cmd.execute({
                id: '#arret_id#'
            })
        })

        $('.eqLogic[data-eqLogic_uid=#uid#] .Ventilation').on('click', function() {
            jeedom.cmd.execute({
                id: '#ventilation_id#'
            })
        })

        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').on('click', function() {
            if ('#boost#' == 1) {
                if ('#mode' == "Auto") {
                    jeedom.cmd.execute({
                        id: '#boost_off_id#',
                        value: {
                            'mode': "Auto"
                        }
                    })
                } else {
                    jeedom.cmd.execute({
                        id: '#boost_off_id#',
                        value: {
                            'mode': "Manuel"
                        }
                    })
                }

            } else {
                if ('#mode' == "Auto") {
                    jeedom.cmd.execute({
                        id: '#boost_on_id#',
                        value: {
                            'mode': "Auto"
                        }
                    })
                } else {
                    jeedom.cmd.execute({
                        id: '#boost_on_id#',
                        value: {
                            'mode': "Manuel"
                        }
                    })
                }
            }

        })



        switch ('#mode#') {
            case "Auto":
                $('.eqLogic[data-eqLogic_uid=#uid#] .Auto').css('pointer-events', 'none')
                $('.eqLogic[data-eqLogic_uid=#uid#] .datetimepicker').css('display', 'none')
                $('.eqLogic[data-eqLogic_uid=#uid#] .Auto').css('color', 'white')
                $('.eqLogic[data-eqLogic_uid=#uid#] .planification_en_cours').append('#planification_en_cours#')
                if ('#boost#' == 1) {
                    //$('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('pointer-events;', 'none')
                    if ('#action_en_cours#' == "Chauffage") {
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('style', 'position:relative;float:right;top: calc(100% - 40px);font-size: 1.9em;margin-left: 5px;color: red!important ;')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Désactiver le mode boost')

                    } else if ('#action_en_cours#' == "Climatisation") {
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block');
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('style', 'position:relative;float:right;top: calc(100% - 40px);font-size: 1.9em;margin-left: 5px;color: #3498db!important ;')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Désactiver le mode boost')
                    }
                    $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('#action_en_cours#')
                } else {
                    if ('#action_en_cours#' != "Chauffage" && '#action_en_cours#' != "Climatisation") {
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'none')
                    } else {
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Activer le mode boost')
                    }
                    $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('#action_en_cours#')
                }
                if ('#prochaine_action#' != "") {

                    $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append(' <i class="fa fa-arrow-right"></i>')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('#prochaine_action#')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                } else {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append(' <i class="fa fa-arrow-right"></i>')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append("Nouvel ordre");
                }
                break
            case "Manuel":
                switch ('#action_en_cours#') {

                    case "Arrêt":
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Arret').css('pointer-events', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Arret').css('color', 'white')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Arrêt')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .droite').find(".page_1").css('display', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .selectCalendar').css('display', 'none')
                        if ('#endtime#' != "") {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                        }
                        break
                    case "Absent":
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Absent').css('pointer-events', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Absent').css('color', 'white')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Absent')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .selectCalendar').css('display', 'none')
                        if ('#endtime#' != "") {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                        } else {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Réactivation manuelle')
                        }
                        break
                    case "Ventilation":
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Ventilation').css('pointer-events', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Ventilation').css('color', 'white')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Ventilation (manuel)')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .selectCalendar').css('display', 'none')
                        if ('#endtime#' != "") {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                        } else {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Réactivation manuelle')
                        }
                        break
                    case "Chauffage":

                        $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').css('pointer-events', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').css('color', 'white')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Chauffage (manuel)')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .selectCalendar').css('display', 'none')
                        if ('#endtime#' != "") {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                        } else {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Réactivation manuelle')
                        }
                        if ('#boost#' == 1) {
                            jeedom.cmd.execute({
                                id: '#boost_on_id#'
                            })
                        } else {
                            jeedom.cmd.execute({
                                id: '#boost_off_id#'
                            })
                        }
                        break
                    case "Climatisation":
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').css('pointer-events', 'none')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').css('color', 'white')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Climatisation (manuel)')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                        $('.eqLogic[data-eqLogic_uid=#uid#] .selectCalendar').css('display', 'none')
                        if ('#endtime#' != "") {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                        } else {
                            $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                            $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Réactivation manuelle')
                        }
                        if ('#boost#' == 1) {
                            jeedom.cmd.execute({
                                id: '#boost_on_id#'
                            })
                        } else {
                            jeedom.cmd.execute({
                                id: '#boost_off_id#'
                            })
                        }
                        break
                    default:
                        break
                }
                break
            case "boost_on":

                if ('#action_en_cours#' == "Chauffage") {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('style', 'position:relative;float:right;top: calc(100% - 40px);font-size: 1.9em;margin-left: 5px;color: red!important ;')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Désactiver le mode boost')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Chauffage (manuel)')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').css('pointer-events', 'none')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').css('color', 'white')
                }
                if ('#action_en_cours#' == "Climatisation") {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('style', 'position:relative;float:right;top: calc(100% - 40px);font-size: 1.9em;margin-left: 5px;color:  #3498db!important ;')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Désactiver le mode boost')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Climatisation(manuel)')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').css('pointer-events', 'none')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').css('color', 'white')

                }

                if ('#endtime#' != "") {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                } else {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Réactivation manuelle')
                }
                break

            case "boost_off":

                if ('#action_en_cours#' == "Chauffage") {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('style', 'position:relative;float:right;top: calc(100% - 40px);font-size: 1.9em;margin-left: 5px;color: white!important ;')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Activer le mode boost')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Chauffage (manuel)')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').css('pointer-events', 'none')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Chauffage').css('color', 'white')
                }
                if ('#action_en_cours#' == "Climatisation") {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').css('display', 'inline-block')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('style', 'position:relative;float:right;top: calc(100% - 40px);font-size: 1.9em;margin-left: 5px;color: white!important ;')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .boost').attr('title', 'Activer le mode boost')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .action_en_cours').append('Climatisation(manuel)')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').css('pointer-events', 'none')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .Climatisation').css('color', 'white')

                }
                if ('#endtime#' != "") {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .fleche').append('<i class="fa fa-arrow-right"></i>')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .prochaine_action').append('Auto')
                    $('.eqLogic[data-eqLogic_uid=#uid#] .heure_prochaine_action').append('#endtime#')
                }
                break
        }
        Commun_widget('#id#', '#uid# ', '#info_widget# ', '#action_en_cours#', '#set_planification_id#', '#endtime_change_id#')
    </script>
</div>